{include file="header.html"}
{include file="trafficheader.html"}
<!--// $Id$ //-->
<H1>{$layout.pagetitle}</H1>
{if $bars}
<TABLE WIDTH="100%" ALIGN="center" CELLPADDING="3">
	<TR>
		<TD VALIGN="top" WIDTH="50%">
			<TABLE WIDTH="100%" CELLPADDING="2">
				<TR class="DARK">
					<TD class="FALL" align="center" COLSPAN="2">
						<P><B>{t}Download{/t}</B></P>
					</TD>
				</TR>
				{section name=download loop=$download.name}
				<TR>
					<TD CLASS="fleft" WIDTH="1%" NOWRAP>
						<B><A HREF="?m=nodeinfo&id={$download.nodeid[download]}">{if $showips}{$download.ipaddr[download]}{else}{$download.name[download]|truncate:32:"..."}{/if}</A></B>
					</TD>
					<TD CLASS="fright" WIDTH="99%" NOWRAP>
						<IMG SRC="img/redpx.gif" HEIGHT="12" WIDTH="{$download.bar[download]}" BORDER="1" ALT="" ALIGN="ABSMIDDLE"> {$download.data[download]|string_format:"%.2f"}&nbsp;{$download.unit[download]}
					</TD>
				</TR>
				{/section}
				<TR class="LIGHT">
					<TD ALIGN="center" class="FALL" COLSPAN="2">
						<P><B>{t}Total{/t}: {$download.sum.data|string_format:"%.2f "}{$download.sum.unit}</B></P>
					</TD>
				</TR>
			</TABLE>
		</TD>
		<TD VALIGN="top" WIDTH="100%">
			<TABLE WIDTH="100%" CELLPADDING="2">
				<TR class="DARK">
					<TD class="FALL" align="center" COLSPAN="2">
						<P><B>{t}Upload{/t}</B></P>
					</TD>
				</TR>
				{section name=upload loop=$upload.name}
				<TR>
					<TD CLASS="fleft" WIDTH="1%" NOWRAP>
						<B><A HREF="?m=nodeinfo&id={$upload.nodeid[upload]}">{if $showips}{$upload.ipaddr[upload]}{else}{$upload.name[upload]|truncate:32:"..."}{/if}</A></B>
					</TD>
					<TD CLASS="fright" WIDTH="99%" NOWRAP>
						<IMG SRC="img/bluepx.gif" HEIGHT="12" WIDTH="{$upload.bar[upload]}" BORDER="1" ALT="" ALIGN="ABSMIDDLE"> {$upload.data[upload]|string_format:"%.2f"}&nbsp;{$upload.unit[upload]}
					</TD>
				</TR>
				{/section}
				<TR class="LIGHT">
					<TD ALIGN="center" CLASS="FALL" COLSPAN="2">
						<P><B>{t}Total{/t}: {$upload.sum.data|string_format:"%.2f "}{$upload.sum.unit}</B></P>
					</TD>
				</TR>
			</TABLE>
		</TD>
	</TR>
</TABLE>
{else}
<FORM NAME="traffic" METHOD="POST" ACTION="?m=traffic&bar=user">
<TABLE ALIGN="center" WIDTH="600" CELLPADDING="3">
	<TR CLASS="dark">
		<TD COLSPAN="2" ALIGN="center" CLASS="fall">
			<B>{t}Enter search conditions{/t}</B>
		</TD>
	</TR>
	<TR CLASS="light" {tip text="Limit results for selected period"}>
		<TD WIDTH="300" ALIGN="right" CLASS="fleft">
			<B>{t}From (day/month/year hh:mm){/t}:</B>
		</TD>
		<TD CLASS="fright">
			{html_select_date field_array="from" prefix="" time=$starttime field_order="DMY" field_separator=" / " start_year=$startyear end_year=$endyear}
			&nbsp;
			{html_select_time field_array="from" prefix="" time=$starttime display_seconds=0}
		</TD>
	</TR>
	<TR CLASS="light" {tip text="Limit results for selected period"}>
		<TD WIDTH="300" ALIGN="right" CLASS="fleft">
			<B>{t}To (day/month/year hh:mm){/t}:</B>
		</TD>
		<TD CLASS="fright">
			{html_select_date field_array="to" prefix="" time=$endtime field_order="DMY" field_separator=" / " start_year=$startyear end_year=$endyear}
			&nbsp;
			{html_select_time field_array="to" prefix="" time=$endtime display_seconds=0}
		</TD>
	</TR>
	<TR CLASS="light" {tip text="Limit results for selected network"}>
		<TD WIDTH="300" ALIGN="right" CLASS="fleft">
			<B>{t}Network{/t}:</B>
		</TD>
		<TD CLASS="fright">
			<SELECT SIZE="1" NAME="net">
				<OPTION VALUE="allnets">{t}All{/t}</OPTION>
				{section name="netlist" loop=$netlist}
				<OPTION VALUE="{$netlist[netlist].id}">{$netlist[netlist].name|truncate:20:" ..."}</OPTION>
				{/section}
			</SELECT>
		</TD>
	</TR>
	<TR CLASS="light" {tip text="Select result's sorting order"}>
		<TD WIDTH="300" ALIGN="right" CLASS="fleft">
			<B>{t}Sorting{/t}:</B>
		</TD>
		<TD CLASS="fright">
			<SELECT SIZE="1" NAME="order">
				<OPTION VALUE="name">{t}Host's name{/t}</OPTION>
				<OPTION VALUE="ip">{t}Host's IP address{/t}</OPTION>
				<OPTION VALUE="nodeid">{t}Host's ID{/t}</OPTION>
				<OPTION VALUE="download" SELECTED>{t}Download{/t}</OPTION>
				<OPTION VALUE="upload">{t}Upload{/t}</OPTION>
			</SELECT>
		</TD>
	</TR>
	<TR CLASS="light" {tip text="Limit results for x nodes"}>
		<TD WIDTH="300" ALIGN="right" CLASS="fleft">
			<B>{t}Limit results to{/t}:</B>
		</TD>
		<TD CLASS="fright">
			<INPUT NAME="limit" SIZE="3"></INPUT> <B>{t}nodes{/t}</B>
		</TD>
	</TR>
	<TR CLASS="light" {tip text="Nodes depiction way on chart"}>
		<TD WIDTH="300" ALIGN="right" CLASS="fleft"></TD>
		<TD CLASS="fright">
			<INPUT CLASS="box" TYPE="checkbox" NAME="showips" VALUE="1"><B>&nbsp;{t}IP adresses instead of hosts names{/t}</B></INPUT>
		</TD>
	</TR>
	<TR CLASS="light">
		<TD COLSPAN="2" ALIGN="right" CLASS="fbottomu">
			<A HREF="javascript:document.traffic.submit();" ACCESSKEY="D">{t}Go{/t} <IMG SRC="img/save.gif" BORDER="0" ALIGN="ABSMIDDLE" ALT=""></A>
		</TD>
	</TR>
</TABLE>
</FORM>
<BR>
<FORM NAME="trafficdbcompact" METHOD="POST" ACTION="?m=trafficdbcompact">
<TABLE ALIGN="center" WIDTH="600" CELLPADDING="3">
	<TR CLASS="dark">
		<TD COLSPAN="2" ALIGN="center" CLASS="fall">
			<B>{t}Database compactiong{/t}</B>
		</TD>
	</TR>
	<TR CLASS="light">
	 	<TD WIDTH="50%" ALIGN="right" CLASS="fleft" {tip text="Compacting of database insist on removing non-essential data from database and averaging existing data. This decreasing amount of records in database, and reducing time of waiting for results, but also precision."}>
			<B>{t}Data precision level{/t}:</B>
		</TD>
		<TD WIDTH="50%" CLASS="fright">
			<B><INPUT STYLE="border-style: none; background: #DFD5BD" TYPE="radio" NAME="level" VALUE="1" {tip text="Data older than one day will be averaged to one day"}>{t}Low{/t}</INPUT>&nbsp;
			   <INPUT STYLE="border-style: none; background: #DFD5BD" TYPE="radio" NAME="level" VALUE="2" {tip text="Data older than one month will be averaged to one day"}>{t}Medium{/t}</INPUT>&nbsp;
			   <INPUT STYLE="border-style: none; background: #DFD5BD" TYPE="radio" NAME="level" VALUE="3" {tip text="Data older than one month will be averaged for one hour"}>{t}High{/t}</INPUT>
			</B>
		</TD>
	</TR>
	<TR CLASS="light">
		<TD WIDTH="50%" CLASS="fleft"></TD>
		<TD WIDTH="50%" CLASS="fright" {tip text="Check that option for deletion of records older than one year"}>
		    <INPUT CLASS="box" TYPE="checkbox" NAME="delete" VALUE="1"><B>&nbsp;{t}Delete data older than one year{/t}</B></INPUT>
		</TD>
	</TR>
	<TR CLASS="light">
		<TD WIDTH="50%" CLASS="fleft"></TD>
		<TD WIDTH="50%" CLASS="fright" {tip text="Check that option for deletion of stats of nodes that already not exists in database!"}>
		    <INPUT CLASS="box" TYPE="checkbox" NAME="removedeleted" VALUE="1"><B>&nbsp;{t}Delete stats of non-existing nodes{/t}</B></INPUT>
		</TD>
	</TR>
	<TR CLASS="light">
		<TD COLSPAN="2" ALIGN="right" CLASS="fbottomu">
			<A HREF="javascript:document.trafficdbcompact.submit();" ACCESSKEY="K">{t}Compact{/t} <IMG SRC="img/save.gif" BORDER="0" ALIGN="ABSMIDDLE" ALT=""></A>
		</TD>
	</TR>
</TABLE>
</FORM>
{/if}
{include file="footer.html"}
