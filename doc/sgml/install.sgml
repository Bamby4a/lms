<!-- $Id$ -->
  <chapter id="install">
    <title>Installation and configuration</title>
    <sect1 id="install-intro">
      <title>Intro</title>
	<para>LMS consist a few modules, body of LMS is <emphasis>LMS-UI</emphasis> 
	(user interface). It is in integrity written in PHP and for work require database 
	(in fact every module require database). Exactly in <emphasis>LMS-UI</emphasis> we perform all 
	actions, the rest of modules is only for automate work of LMS.</para>
	<para>LMS is also set of PERL scripts, and exactly these scripts requires 
	to have that language interpreter. If you will want use these scripts, 
	you must have PERL. Among others, scripts allow on monthly counting of subscription fees, 
	or sending of admonitions. It is also <emphasis>LMS-MGC</emphasis>, witch is script too, but
	so much universal that can generate practically any config file and restart 
	service on your server.</para>
        <para>At the end it is also <emphasis>A.L.E.C's LMS Daemon</emphasis>, written in C language, which is assigned 
	(in fact his plugins) for configuration files generation and services restarting. 
	It can be used as replacement or addition of perl's scripts.
	It responds for what has been changed in <emphasis>LMS-UI</emphasis> was made also 
	in real.</para>
    </sect1>
    <sect1 id="install-requirements">
     	  <title>Requirements</title>
	    <sect2 id="install-req-www">
	      <title>WWW Server</title>
	      <para>Because <emphasis>LMS-UI</emphasis> is written in PHP, necessary is WWW server with interpreter of 
		that language. Perefered server is Apache 
		(<ulink url="http://www.apache.org">www.apache.org</ulink>).</para>
	    </sect2>
	    <sect2 id="install-req-php">
	      <title>PHP Interpreter</title>
	      <para>Interpreter should be in version 4.2.x or higher, but on 4.1.x also
	      works fine (but because developers uses 4.2.3, can't guarante correct work
		with older versions. PHP can be downloaded from page
		<ulink url="http://www.php.net">www.php.net</ulink>.</para>
	    </sect2>
	    <sect2 id="install-req-db">
	      <title>Database Server</title>
	      <para>LMS will not work correctly with MySQL versions older than 3.23.xx 
	      </para>
	      <para>LMS also works with PostgreSQL in version 7.3.x or higher.</para>
	    </sect2>
	    <sect2 id="install-req-smarty">
             <title>Smarty Library</title>
             <para><emphasis>LMS-UI</emphasis> require Smarty library(<ulink url="http://smarty.php.net">http://smarty.php.net</ulink>)
		 in version 2.5.0 or higher.</para>
            </sect2>
	    <sect2 id="install-req-gettext">
             <title>Gettext Library</title>
             <para>For multilanguage support in <emphasis>LMS-UI</emphasis> is used gettext,
		 so even if you want english interface only, you must have gettext support in PHP.</para>
            </sect2>
            <sect2 id="install-req-perl">
            <title>Perl</title>
	  <para>If for <emphasis>LMS-UI</emphasis> will suffice above stuff, for working 
		<emphasis>LMS-MGC</emphasis> and the rest of scripts you will need 
		also Perl and modules for him:
	  <itemizedlist>
	    <listitem>
	       <para>perl and his basic modules (POSIX, GetOpt::Long);</para>
	    </listitem>
	    <listitem>
	       <para>Net::SMTP;</para>
	    </listitem>
	    <listitem>
	       <para>Config::IniFiles;</para>
	    </listitem>
	    <listitem>
	       <para>DBI;</para>
	    </listitem>
	    <listitem>
	       <para>DBD-mysql (if you will use mysql);</para>
	    </listitem>
	    <listitem>
	       <para>DBD-pg (if you will use postgres);</para>
	    </listitem>
	  </itemizedlist></para>
	  </sect2>
	  <sect2 id="install-req-c">
	    <title>C Compiler</title>
	  <para>If you'll run<emphasis>A.L.E.C's LMS Daemon</emphasis> is needed
	  working C compiler, because daemon is providing only in the form of source code.</para>
	  </sect2>
	</sect1>
	<sect1 id="install-install">
	<title>LMS Installation</title>
	  	<para>LMS in the form of tar.gz archive can be downloaded from project 
		home page (<ulink url="http://www.lms.rulez.pl">www.lms.rulez.pl</ulink>),
		afterd that should be extracted and placed in chosen directory (i.e. <filename>/var/www/lms
		</filename>) available for server www:
<screen>
$ cd /var/www
$ wget http://lms.rulez.pl/download/lms-x.x.x.tar.gz
$ tar zxf lms-x.x.x.tar.gz
</screen>
		</para>
		<para>Two kind of LMS packets are available - including Smarty library
		(<filename>lms-x.x.x+libs.tar.gz</filename>) and without that library.
		If you haven't got package with libraries, you must get and placed them
		in directory <filename>lib</filename>.
<screen>
$ cd /var/www/lms/lib
$ wget http://smarty.php.net/distributions/Smarty-2.6.0.tar.gz
$ tar zxf Smarty-2.6.0.tar.gz
$ mv Smarty-2.6.0/libs Smarty
</screen>
		</para>
		<para><note><para>Placement of all directories can be set in section
		<emphasis>[directories]</emphasis> in file <filename>lms.ini</filename>.</para></note></para>
		<para>Files with configuration (<filename>sample/lms.ini</filename> and <filename>
		sample/lms-mgc.ini</filename>) place in directory <filename>/etc/lms</filename>.
		</para>
		<para>Exec scripts from directory <filename>bin</filename> 
		is preferably to move to directory <filename>/usr/sbin</filename>.
		</para>
		<para><warning><para>Server www must have reading rights on file <filename>lms.ini</filename>
		and writing rights on directory <filename>backup</filename>. 
		It makes potential drop of system security level.</para></warning></para>
	</sect1>
	<sect1 id="install-db">
	<title>Database Server Installation</title>
		<sect2 id="install-mysql">
		<title>MySQL</title>
		<sect3 id="install-mysql-intro">
		<title>Intro</title>
			<para>That very popular database is available with majority of Linux distributions. 
			If however you must install it independently,
			begin from sources downloading from <ulink url="http://www.mysql.org">
			www.mysql.org</ulink>.</para>
		</sect3>
		<sect3 id="install-mysql-server">
		<title>MySQL Server Installation</title>
			<para>After extracting, go to directory with MySQL and type sequence
			of commands:
			<screen>
$ ./configure --prefix=/usr/local/mysql
$ make
$ make install
$ /usr/local/mysql/bin/mysql_install_db
$ chown mysql -R /usr/local/mysql/var
$ /usr/local/mysql/bin/safe_mysqld &
$ /usr/local/mysql/bin/mysqladmin -u root password nowe_has³o</screen>
		</para>
		</sect3>
		<sect3 id="install-mysql-dbcreate">
		<title>Create Database</title>
			<para>It is necesserily if you run LMS at the FIRST time. If you are
			upgrading LMS from older version, appropriate notes what to do with database
			stands in ChangeLog file. So, go to directory, in which you've got LMS and
			run mysql's shell:
			<screen>
mysql -u[here enter user with full access rights to database] -p
Enter password:[just enter password:)]
mysql> create database lms;
mysql> grant usage on lms.* to lms@localhost;
mysql> grant select,insert,update,delete,create on lms.* to lms@localhost identified by 'haslo';
mysql> flush privileges;
mysql> use lms;
mysql> source doc/lms.mysql;</screen>
		</para>
		</sect3>
		<sect3 id="install-mysql-lms">
		<title>LMS Configuration (lms.ini)</title>
			<para>Because MySQL is default database for LMS, configuration is limited for
			setting in section [database] of file /etc/lms/lms.ini password and user's name:
			<screen>
user     = lms
password = your_password</screen>
		    </para>
			<para>After that, if LMS can establish connection to database server,
			it is possible get to the system without problems. If in database is no 
			such administrator account, only thing what you'll see
			be form of administrator addition. When you enter correct admin personal
			details, LMS will move you to login page, where at once you can
			use newly created account.
			</para>
			<para>Let's stop here, add some stuff to cron, for peace of mind:
			<screen>
12 4 3,10,17,21,28 * * /usr/bin/mysqldump -u lms --password=your-super-secret-password \
		    --add-drop-table --add-locks lms > backups/lms-auto-"$(date +%s)".sql</screen>
			</para>
			<para>That will create at 4:12 morning, every 3, 10, 17, 21 and 28 day
			of month automagic mysql database backup.</para>
		</sect3>
		</sect2>
		<sect2 id="install-pgsql">
		<title>PostgreSQL</title>
		<sect3 id="install-pgsql-intro">
		<title>Intro</title>
			<para>LMS jest testowany na PostgreSQL 7.3.4 i nowszych, ale poniewa¿ ¿adne
			skomplikowane w³a¶ciwo¶ci tej bazy nie s± wykorzystywane, nie powinno
			byæ problemów z innymi wersjami. Je¿eli nie masz zainstalowanego serwera
			PostgreSQL, najlepszym rozwi±zaniem bêdzie w³asnorêczna kompilacja
			ze ¼róde³ dostêpnych na stronie <ulink url="http://www.postgresql.org">
			www.postgresql.org</ulink>.</para>
		</sect3>
		<sect3 id="install-pgsql-server">
		<title>Instalacja</title>
			<para>Jest to wersja skrócona instalacji, wiêcej informacji znajdziesz
			w dokumentacji postgresa. Po ¶ci±gniêciu i rozpakowaniu wejd¼
			do katalogu g³ównego i wpisz kolejno poni¿sze polecenia.
			<screen>
$ ./configure --enable-locale
$ gmake
$ su
$ gmake install
$ adduser postgres
$ mkdir /usr/local/pgsql/data
$ chown postgres /usr/local/pgsql/data
$ su - postgres
$ /usr/local/pgsql/bin/initdb -D /usr/local/pgsql/data
$ /usr/local/pgsql/bin/postmaster -D /usr/local/pgsql/data >logfile 2>&1 &</screen>
			</para>
		</sect3>
		<sect3 id="install-pgsql-dbcreate">
		<title>Utworzenie bazy danych</title>
			<para>Maj±c uruchomiony serwer mo¿esz przyst±piæ do tworzenia bazy o nazwie 'lms',
			której w³a¶cicielem bêdzie u¿ytkownik z loginem 'lms'. 
			<screen>
$ /usr/local/pgsql/bin/createuser -d -A -P lms
$ /usr/local/pgsql/bin/createdb -E LATIN2 -U lms lms
$ /usr/local/pgsql/bin/psql -d lms -U lms -f /lms/doc/lms.pgsql</screen>
		</para>
		</sect3>
		<sect3 id="install-pgsql-lms">
		<title>Konfiguracja LMS (lms.ini)</title>
			<para>Dla systemu LMS domy¶lnym serwerem baz danych jest MySQL, dlatego w sekcji
			[database] pliku /etc/lms/lms.ini nale¿y ustawiæ nastêpuj±ce opcje:
   			<screen>
type     = postgres
user     = lms
password = has³o_podane_przy_tworzeniu_u¿ytkownika_lms</screen>
		    </para>
			<para><note><para>Has³o jest wymagane w zale¿no¶ci od konfiguracji autentykacji
       			u¿ytkowników postgresa w <filename>/usr/local/pgsql/data/pg_hba.conf</filename>. 
       			Domy¶lnie has³o nie jest wymagane.</para></note></para>
			<para>Po takim zabiegu, o ile LMS'owi uda siê nawi±zaæ po³±czenie do bazy danych,
			mo¿na ju¿ bez problemu dostaæ siê do systemu. Je¿eli jednak w bazie danych
			nie ma ¿adnego konta administratora, jedyn± rzecz± jak± zobaczysz
			bêdzie formularz dodania administratora. Je¿eli podasz prawid³owe dane
			administratora, LMS przeniesie Ciê na stronê logowania gdzie od razu bêdziesz
			móg³ u¿yæ nowo utworzonego konta.</para>
		</sect3>
		</sect2>
	</sect1>  	
 	<sect1 id="install-config">
      	    <title>Konfiguracja podstawowa</title>
 	    <para>G³ównym plikiem konfiguracyjnym LMS jest <filename>lms.ini</filename>,
	    który nale¿y umie¶ciæ w katalogu <filename>/etc/lms</filename> lub w katalogu
	    g³ównym LMS'a. Zawiera on zmienne konfiguracyjne <emphasis>LMS-UI</emphasis> 
	    oraz wszystkich skryptów wykonywalnych z wyj±tkiem <emphasis>LMS-MGC</emphasis>.</para>
	    <para><note><para>Pamiêtaj o usuniêciu ¶redników na pocz±tku linii z ustawianym 
	    parametrem konfiguracyjnym.</para></note></para>
	    <sect2 id="install-config-db">
	    <title>Sekcja [database] - ustawienia bazy danych</title>
	    <para>
	    <itemizedlist>
            <listitem>
	    <para>type</para>
	   <para>Typ bazy danych. Aktualnie w 100% supportowany jest 'mysql', ale jak na razie nie 
	   widaæ wiêkszych problemów z 'postgres'. Domy¶lnie: mysql</para>
	   <para>Przyk³ad: <prompt>type = mysql</prompt></para>
	  </listitem>
          <listitem>
	   <para>host</para>
	   <para>Host gdzie zainstalowana jest baza danych. Najczê¶ciej, localhost, ale mo¿na tutaj 
	   wstawiæ cokolwiek (ip, domena, ¶cie¿ka do gniazda w formacie 'localhost:/path/to/socket'). 
	   Domy¶lnie: localhost</para>
	   <para>Przyk³ad:	<prompt>host = localhost</prompt></para>
	  </listitem>
          <listitem>
	   <para>user</para>
	   <para>U¿ytkownik do bazy danych. W wielu wypadkach (je¿eli postêpowa³e¶ zgodnie ze 
	   wskazówkami w dokumentacji) bêdzie to 'lms'. Je¿eli chcesz u¿ywaæ konta uprzywilejowanego, 
	   prawdopodobnie wpiszesz 'root' (MySQL na wiêkszo¶ci *nixów), 'mysql' (na PLD) b±d¼ 
	   'postgres' (PostgreSQL). Domy¶lnie: mysql</para>
	   <para>Przyk³ad:	<prompt>user = lms</prompt></para>
	  </listitem>
          <listitem>
	   <para>password</para>
	   <para>Has³o do bazy danych. Domy¶lnie puste.</para>
	   <para>Przyk³ad:	<prompt>password = password</prompt></para>
	  </listitem>
          <listitem>
	   <para>database</para>
	   <para>Nazwa bazy danych, domy¶lnie lms.</para>
	   <para>Przyk³ad:	<prompt>database = lms</prompt></para>
	  </listitem>
         </itemizedlist>
	</para>
	</sect2>
	<sect2 id="install-config-dir">         
	<title>Sekcja [directories] - ustawienia katalogów</title>
 	<para>        
	<itemizedlist>
          <listitem>
	   <para>sys_dir</para>
	   <para>Katalog systemowy. Jest to miejsce gdzie jest ca³a zawarto¶æ UI LMS'a, czyli index.php, grafiki, 
	   templejty i reszta. Domy¶lnie, index.php stara siê sam odnale¼æ w filesystemie u¿ywaj±c getcwd(), ale 
	   lepiej by by³o gdyby mu powiedzieæ gdzie jest:</para>
	   <para>Przyk³ad:	<prompt>sys_dir = /var/www/htdocs/lms/</prompt></para>
	  </listitem>
          <listitem>
	   <para>modules_dir</para>
	   <para>Katalog z "modu³ami" LMS'a. Czyli zawarto¶æ katalogu modules. Domy¶lnie jest to podkatalog 
	   modules w sys_dir.</para>
	   <para>Przyk³ad:	<prompt>modules_dir = /usr/share/lms/modules/</prompt></para>
	  </listitem>
          <listitem>
	   <para>lib_dir</para>
	   <para>Katalog z "bibliotekami" LMS'a. Czyli zawarto¶æ katalogu lib. Domy¶lnie to podkatalog lib w sys_dir.</para>
	   <para>Przyk³ad:	<prompt>lib_dir = /usr/share/lms/lib/</prompt></para>
	  </listitem>
          <listitem>
	   <para>backup_dir</para>
	   <para>Katalog z kopiami zapasowymi bazy danych - miejsce gdzie LMS zapisuje zrzuty z bazy. 
	   Domy¶lnie jest to podkatalog 'backups'.</para>
	   <para>Przyk³ad:	<prompt>backup_dir = /var/backup/lms/</prompt></para>
	   <para><warning><para>Je¶li katalog z kopiami zapasowymi bêdzie osi±galny z poziomu WWW, to ka¿dy 
	   bez autoryzacji bêdzie mia³ do nich dostêp.</para></warning></para>
	  </listitem>
          <listitem>
	   <para>smarty_dir</para>
	   <para>Katalog z bibliotek± Smarty - domy¶lnie podkatalog Smarty w lib_dir.</para>
	   <para>Przyk³ad:	<prompt>smarty_dir = /usr/lib/php/Smarty</prompt></para>
	  </listitem>
          <listitem>
	   <para>smarty_compile_dir</para>
	   <para>Katalog kompilacji Smartyego. Miejsce gdzie Smarty kompiluje szablony. Domy¶lnie to 
	   <filename>templates_c</filename> w katalogu sysdir.</para>
	   <para>Przyk³ad: 	<prompt>smarty_compile_dir = /var/smarty/compile/lms</prompt></para>
	  </listitem>
          <listitem>
	   <para>smarty_templates_dir</para>
	   <para>Katalog z szablonami którymi Smartiego. Domy¶lnie to podkatalog templates z sys_dir'a.</para>
	   <para>Przyk³ad:	<prompt>smarty_templates_dir = /usr/share/lms/templates</prompt></para>
	  </listitem>
         </itemizedlist>
	</para>
	</sect2>
	<sect2 id="install-config-ui">
	<title>Sekcja [phpui] - ustawienia interfejsu</title>
    	<itemizedlist>
   	<listitem>
    	<para>allow_from  (opcjonalny)</para>
    	<para>Lista sieci i adresów IP które maj± dostêp do LMS. Je¿eli puste, ka¿dy adres IP ma dostêp do LMS'a, 
	je¿eli wpiszemy tutaj listê adresów b±d¼ klas adresowych, LMS odrzuci b³êdem HTTP 403 ka¿dego 
	niechcianego u¿ytkownika.</para>
    	<para>Przyk³ad:		<prompt>allow_from = 192.168.0.0/16, 213.25.209.224/27, 213.241.77.29</prompt></para>
   </listitem>
   <listitem>
    <para>timeout</para>
    <para>Timeout sesji www. Po tym czasie (w sekundach) u¿ytkownik zostanie wylogowany je¿eli nie 
    podejmie ¿adnej akcji. Domy¶lnie 600 sekund.</para>
    <para>Przyk³ad:	<prompt>timeout = 900</prompt></para>
    <para><warning><para>Nie ma mo¿liwo¶ci ustawienia braku timeoutu. Je¿eli ustawisz t± warto¶æ na zero, nie 
    bêdziesz móg³ korzystaæ z LMS!</para></warning></para>
   </listitem>
   <listitem>
    <para>userlist_pagelimit</para>
    <para>Limit wy¶wietlanych pozycji na stronie w li¶cie u¿ytkowników. Domy¶lnie brak limitu.</para>
    <para>Przyk³ad:	<prompt>userlist_pagelimit = 10</prompt></para>
   </listitem>
   <listitem>
    <para>nodelist_pagelimit</para>
    <para>Limit wy¶wietlanych pozycji na stronie w li¶cie komputerów. Domy¶lnie brak limitu.</para>
    <para>Przyk³ad:	<prompt>nodelist_pagelimit = 10</prompt></para>
   </listitem>
   <listitem>
    <para>balancelist_pagelimit</para>
    <para>Limit wy¶wietlanych pozycji na stronie na rachunku u¿ytkownika. Domy¶lnie: 100.</para>
    <para>Przyk³ad:	<prompt>balancelist_pagelimit = 50</prompt></para>
   </listitem>
   <listitem>
    <para>invoicelist_pagelimit</para>
    <para>Limit wy¶wietlanych pozycji na stronie w li¶cie faktur. Domy¶lnie: 100</para>
    <para>Przyk³ad:	<prompt>invoicelist_pagelimit = 50</prompt></para>
   </listitem>
   <listitem>
    <para>reload_type</para>
    <para>Typ reloadu. Dozwolone warto¶ci:</para>
    <para>exec - wywo³ywanie jakiej¶ komendy (najczê¶ciej co¶ przez sudo, jaki¶ skrypt lub co¶, konfigurowalny
     poni¿ej)</para>
    <para>sql  - zrobienie wpisów w SQL'u (te¿ mo¿na ustawiæ konkretne query SQL'a)</para>
    <para>Domy¶lna warto¶æ to 'sql'.</para>
    <para>Przyk³ad:	<prompt>reload_type = exec</prompt></para>
   </listitem>
   <listitem>
    <para>reload_execcmd</para>
    <para>Komenda do wykonania podczas reloadu je¿eli reload_type jest ustawione na 'exec'. Domy¶lnie
    <filename>/bin/true</filename>. String ten puszczany do komendy system() wiêc proponujê rozwagê 
    i pomy¶lenie co siê robi i jak :) Generalnie ¶redniki powinny byæ parsowane przez bash'a, ale z paru 
    wzglêdów LMS sam dzieli poni¿szy ci±g pod wzglêdem ¶redników i wykonuje komendy pojedynczo.</para>
    <para>Przyk³ad:	<prompt>reload_execcmd = "sudo /usr/bin/reload_lms.sh"</prompt></para>
   </listitem>
   <listitem>
    <para>reload_sqlquery</para>
    <para>Zapytanie SQL wykonywane podczas reloadu, je¶li <prompt>reload_type = sql</prompt>.  
    Domy¶lnie zapytanie wrzuca do tabeli timestamps warto¶æ '_force'. W zapytaniu mo¿na u¿yæ 
    '%TIME%' jako podstawki pod aktualny timestamp unixowy. UWAGA! Znak ¶rednika jest 
    traktowany jako separator kwerend, tzn. oddzielaj±c znakiem ¶rednika mo¿esz wpisaæ kilka zapytañ SQL.</para>
    <para>Przyk³ad:	<prompt>reload_sqlquery = "INSERT INTO reload VALUES ('1','%TIME%')"</prompt></para>
   </listitem>
   <listitem>
    <para>force_ssl</para>
    <para>Wymuszanie SSL'a. Ustawienie tej zmiennej na 1 spowoduje ¿e LMS bêdzie wymusza³ po³±czenie 
    SSL powoduj±c redirect do 'https://'.$_SERVER[HTTP_HOST].$_SERVER[REQUEST_URI] przy ka¿dej 
    próbie dostêpu bez SSL. Domy¶lnie wy³±czone.</para>
    <para>Przyk³ad:	<prompt>force_ssl = 0</prompt></para>
   </listitem>
   <listitem>
    <para>allow_mac_sharing</para>
    <para>Przyzwolenie na dodawanie rekordów komputerów z adresami MAC ju¿ istniej±cymi (nie sprawdza 
    czy jaki¶ inny komputer posiada taki adres MAC). Domy¶lnie wy³±czone</para>
    <para>Przyk³ad:	<prompt>allow_mac_sharing	= 1</prompt></para>
   </listitem>
   <listitem>
    <para>smarty_debug</para>
    <para>W³±czenie konsoli debugowej Smartyego, przydatne do ¶ledzenia warto¶ci przekazywanych z PHP 
    do Smartyego. Domy¶lnie wy³±czone.</para>
    <para>Przyk³ad:	<prompt>smarty_debug = 1</prompt></para>
   </listitem>
   <listitem>
    <para>debug_email</para>
    <para>Adres e-mail do debugowania - pod ten adres bêd± sz³y wiadomo¶ci wysy³ane z sekcji 'Mailing' LMS'a, 
    zamiast do w³a¶ciwych u¿ytkowników.</para>
    <para>Przyk³ad:	<prompt>debug_email = root@localhost</prompt></para>
   </listitem>
   <listitem>
    <para>default_zip, default_city, default_address</para>
    <para>Domy¶lny kod pocztowy, miasto, ulica, stosowane podczas wstawiania nowego
    u¿ytkownika. Przydatne gdy mamy do wpisania wielu u¿ytkowników z tej samej ulicy.</para>
    <para>Przyk³ad:	<prompt>default_zip = 39-300</prompt></para>
   </listitem>
   <listitem>
    <para>use_current_payday</para>
    <para>Okre¶la, czy ma byæ u¿yty aktualny dzieñ miesi±ca jako dzieñ zap³aty
    zamiast najczê¶ciej u¿ywanego. Domy¶lnie wy³±czone.</para>
    <para>Przyk³ad:	<prompt>use_current_payday = 1</prompt></para>
   </listitem>
  </itemizedlist>
 	</sect2> 
    </sect1>
    <sect1 id="install-rights">
      <title>Prawa dostêpu</title>
      <sect2 id="install-rights-idea">
      		<title>Idea</title>
      <para>LMS  ma  mo¿liwo¶æ  zdefiniowania  do 256 regu³ dostêpu do systemu. Ka¿da z nich mo¿e
      zabraniaæ, b±d¼ pozwalaæ na dostêp do konkretnych modu³ów. Ka¿demu administratorowi mo¿na
      przydzieliæ dowoln± kombinacjê regu³ dostêpu.</para>
      <para>Domy¶lnie zdefiniowanych jest osiem regu³ dostêpu. 
       <itemizedlist>
	<listitem><para>pe³en dostêp</para></listitem>
	<listitem><para>odczyt wszystkich danych</para></listitem>
	<listitem><para>pod³±czanie i od³±czanie komputerów</para></listitem>
	<listitem><para>manipulowanie finansami</para></listitem>
	<listitem><para>prze³adowywanie konfiguracji</para></listitem>
	<listitem><para>manipulowanie danymi u¿ytkowników</para></listitem>
	<listitem><para>manipulowanie danymi komputerów</para></listitem>
	<listitem><para>dostêp do statystyk</para></listitem>
	<listitem><para>dostêp do korespondencji seryjnej</para></listitem>
	<listitem><para>brak dostêpu do modyfikacji i zak³adania kont administratorów</para></listitem>
	<listitem><para>brak dostêpu</para></listitem>
	</itemizedlist>
      Siedem z nich zezwala na dostêp do modu³ów oraz jedna zabrania. Modu³y do których 
      administrator ma zawsze dostêp to: welcome, copyrights,  logout, chpasswd (przy czym 
      chpasswd umo¿liwia tylko zmianê w³asnego has³a), dostêp do reszty jest zdefiniowany regu³ami.</para>
      <note><para>Je¶li nie ustawimy administratorowi ¿adnej regu³y dostêpu, to LMS domy¶lnie
      przydzieli mu regu³kê 0, czyli pe³en dostêp.</para></note>
      </sect2>
      <sect2 id="install-rights-how">
      		<title>Jak to dzia³a?</title>
		<para>Decyzja  czy  u¿ytkownik  ma prawo dostêpu do modu³u czy nie przebiega nastêpuj±co:
		<simplelist>
		<member>-  najpierw  sprawdzana  jest  lista  modu³ów, do których zawsze ma siê
		dostêp,</member>
		<member>-  potem  nastêpuje sprawdzenie czy modu³ pasuje do regu³ w poszczególnych
		poziomach, do których administrator ma dostêp,</member>
		<member>-  na  koñcu podejmowana jest decyzja czy u¿ytkownik ma uprawnienia by
		do  modu³u siê dobraæ. Je¿eli modu³ siê za³apa³ na którykolwiek poziom, który zabrania dostêpu,
		dostêp  zostanie  zabroniony  nawet  je¿eli administrator ma ustawiony poziom, który pozwala
		na dostêp do modu³u (np.  kto¶  ma  pe³ny  dostêp oraz brak dostêpu do modu³u dodawania
		komputerów,  nie  bêdzie  on  móg³ siê odwo³aæ do tego modu³u). Je¿eli modu³ pasuje do
		poziomu, który pozwala na dostêp do danego modu³u LMS zezwala na dalsz± pracê.
		Je¿eli natomiast modu³ siê nie "za³apa³" na ¿aden poziom równie¿ zostanie mu wy¶wietlony
		komunikat o braku dostêpu.</member>
		</simplelist>
		</para>
	</sect2>
    </sect1>
    <sect1 id="install-upgrade">
      <title>Upgrade</title>
      <para>Uaktualnienie LMS'a z wersji 1.0.X do bie¿±cej przebiega w dwóch etapach. Najpierw
      utwórz katalog z plikami nowej wersji (nie nadpisuj starej wersji), nastêpnie trzeba 
      dokonaæ zmian w bazie.</para>
      <para>Dla u³atwienia migracji danych przygotowano pliki
      <filename>UPGRADE.mysql</filename> i <filename>UPGRADE.pgsql</filename>,
      które umieszczono w katalogu z dokumentacj±. W nich znajdziesz krótki
      opis jak przeprowadziæ aktualizacjê w zale¿no¶ci od stosowanej bazy danych.</para>
      <para><note><para>W wersjach wy¿szych od 1.0.x biblioteka ADOdb nie jest wymagana,
      mo¿na skasowaæ odpowiedni katalog</para></note></para>
    </sect1>
  </chapter>
